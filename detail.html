---
layout: null
title: "Detail"
---

<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æ–‡æ¡£è¯¦æƒ… - {{ site.title | default: "My GitHub Site" }}</title>
  <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet" />
  <style>
    :root {
      --bg: #050816;
      --bg-card: rgba(15, 23, 42, 0.85);
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.18);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: rgba(148, 163, 184, 0.35);
      --radius-xl: 18px;
      --shadow-soft: 0 22px 45px rgba(15, 23, 42, 0.75);
      --transition: 0.25s ease;
    }

    body.light-theme {
      --bg: #f3f4f6;
      --bg-card: #ffffff;
      --accent: #2563eb;
      --accent-soft: rgba(37, 99, 235, 0.18);
      --text: #111827;
      --muted: #6b7280;
      --border: rgba(156, 163, 175, 0.55);
      --shadow-soft: 0 18px 35px rgba(15, 23, 42, 0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "PingFang SC", "Helvetica Neue", Arial, "Microsoft YaHei", sans-serif;
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, .18), transparent 55%),
        radial-gradient(circle at bottom right, rgba(129, 140, 248, .18), transparent 55%),
        var(--bg);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 16px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .shell {
      width: 100%;
      max-width: 900px;
      border-radius: 24px;
      background:
        linear-gradient(135deg, rgba(148, 163, 184, 0.25), transparent),
        radial-gradient(circle at top, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.96));
      padding: 1px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    body.light-theme .shell {
      background:
        linear-gradient(135deg, rgba(209, 213, 219, 0.6), transparent),
        radial-gradient(circle at top, #ffffff, #e5e7eb);
    }

    .card {
      border-radius: 24px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      padding: 20px 20px 22px;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    body.light-theme .card {
      background: #ffffff;
      border-color: rgba(209, 213, 219, 0.8);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 18px;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .back-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: transparent;
      color: var(--muted);
      font-size: 13px;
      padding: 5px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: var(--transition);
      text-decoration: none;
    }

    .back-btn:hover {
      color: var(--text);
      background: rgba(15, 23, 42, 0.85);
    }

    body.light-theme .back-btn:hover {
      background: rgba(243, 244, 246, 0.9);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .nav-link-btn {
      border-radius: 999px;
      border: 1px solid transparent;
      background: transparent;
      color: var(--muted);
      padding: 5px 11px;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      text-decoration: none;
      transition: var(--transition);
    }

    .nav-link-btn:hover {
      border-color: rgba(148, 163, 184, 0.7);
      color: var(--text);
      background: rgba(15, 23, 42, 0.75);
    }

    body.light-theme .nav-link-btn:hover {
      background: rgba(243, 244, 246, 0.9);
    }

    .nav-link-primary {
      color: var(--text);
      border-color: rgba(56, 189, 248, 0.8);
      background: radial-gradient(circle at 0 0, var(--accent-soft), rgba(15, 23, 42, 0.96));
      box-shadow: 0 0 16px rgba(56, 189, 248, 0.35);
    }

    .title {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .meta {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .meta-tag {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 11px;
    }

    .content-wrapper {
      margin-top: 6px;
      padding-top: 10px;
      border-top: 1px dashed rgba(148, 163, 184, 0.6);
    }

    /* å¯Œæ–‡æœ¬å†…å®¹æ¸²æŸ“åŒºåŸŸ */

    .doc-content {
      font-size: 14px;
      line-height: 1.7;
      color: var(--text);
    }

    .doc-content h1,
    .doc-content h2,
    .doc-content h3,
    .doc-content h4 {
      margin: 16px 0 8px;
      font-weight: 600;
    }

    .doc-content h1 { font-size: 22px; }
    .doc-content h2 { font-size: 20px; }
    .doc-content h3 { font-size: 18px; }
    .doc-content h4 { font-size: 16px; }

    .doc-content p {
      margin: 6px 0;
    }

    .doc-content ul,
    .doc-content ol {
      padding-left: 1.2em;
      margin: 6px 0;
    }

    .doc-content li {
      margin: 2px 0;
    }

    .doc-content code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13px;
      padding: 1px 4px;
      border-radius: 4px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    body.light-theme .doc-content code {
      background: #f3f4f6;
      border-color: rgba(209, 213, 219, 0.9);
    }

    .doc-content pre {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13px;
      padding: 10px 12px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.5);
      overflow-x: auto;
      margin: 8px 0 10px;
      white-space: pre;
    }

    body.light-theme .doc-content pre {
      background: #f3f4f6;
      border-color: rgba(209, 213, 219, 0.9);
    }

    .doc-content a {
      color: var(--accent);
      text-decoration: underline;
      text-decoration-style: dotted;
    }

    .doc-content img {
      max-width: 100%;
      border-radius: 10px;
      margin: 6px 0;
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .toast {
      position: fixed;
      z-index: 60;
      right: 16px;
      bottom: 16px;
      background: rgba(15, 23, 42, 0.96);
      color: var(--text);
      border-radius: 999px;
      padding: 8px 14px;
      font-size: 12px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.8);
      display: none;
      align-items: center;
      gap: 8px;
    }

    body.light-theme .toast {
      background: #ffffff;
      color: #111827;
      border-color: rgba(209, 213, 219, 0.9);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.24);
    }

    .toast.show {
      display: inline-flex;
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <header class="nav">
        <div class="nav-left">
          <a class="back-btn" href="index.html">
            <span>â†</span><span>è¿”å›é¦–é¡µ</span>
          </a>
        </div>
        <div class="nav-right">
          <a class="nav-link-btn nav-link-primary" href="{{ '/' | relative_url }}">
            <span>ğŸ </span><span>é¦–é¡µ</span>
          </a>
          <a class="nav-link-btn"
             href="https://github.com/{{ site.github_username | default: 'jq666-site' }}"
             target="_blank" rel="noopener">
            <span>ğŸ™</span><span>GitHub</span>
          </a>
          <button type="button" class="nav-link-btn" id="btn-theme-toggle">
            <span>ğŸŒ“</span><span id="theme-toggle-text">ä¸»é¢˜ï¼šæ·±è‰²</span>
          </button>
        </div>
      </header>

      <main>
        <div id="detail-wrapper">
          <div class="title" id="doc-title">åŠ è½½ä¸­...</div>
          <div class="meta">
            <span id="doc-date"></span>
            <span id="doc-id" style="opacity: .7;"></span>
            <span id="doc-tags"></span>
          </div>
          <div class="content-wrapper">
            <div class="doc-content" id="doc-content">
              æ­£åœ¨åŠ è½½å†…å®¹â€¦
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <div class="toast" id="toast">
    <span id="toast-text">æç¤º</span>
  </div>

  <script>
    // API BASEï¼šå’Œ index.html ä¸€æ ·ç”¨ window.DOCS_API_BASEï¼Œå¦‚æœæ²¡èµ‹å€¼å°±ç›¸å¯¹è·¯å¾„
    window.DOCS_API_BASE = window.DOCS_API_BASE || "https://lingering-resonance-6555.aa1348769445.workers.dev";
    const API_BASE = window.DOCS_API_BASE || "";
    const API_DOCS = API_BASE + "/api/docs";

    function showToast(msg) {
      const toast = document.getElementById("toast");
      const text = document.getElementById("toast-text");
      if (!toast || !text) return;
      text.textContent = msg;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 2000);
    }

    // ç®€å•çš„å¯Œæ–‡æœ¬å®‰å…¨å¤„ç†ï¼šå»æ‰ <script> å’Œå†…è” onXXX äº‹ä»¶
    function sanitizeHtml(html) {
      if (!html) return "";
      let out = String(html);

      // å»æ‰ script / style æ ‡ç­¾
      out = out.replace(/<\s*(script|style)[^>]*>[\s\S]*?<\s*\/\s*\1\s*>/gi, "");

      // å»æ‰ onXXX äº‹ä»¶ï¼ˆonload / onclick ç­‰ï¼‰
      out = out.replace(/\son\w+="[^"]*"/gi, "");
      out = out.replace(/\son\w+='[^']*'/gi, "");
      out = out.replace(/\son\w+=([^"'\s>]+)(?=[\s>])/gi, "");

      // é™åˆ¶ iframeï¼ˆç›´æ¥ç§»é™¤ï¼‰
      out = out.replace(/<\s*iframe[^>]*>[\s\S]*?<\s*\/\s*iframe\s*>/gi, "");

      return out;
    }

    function applyThemeFromStorage() {
      const saved = localStorage.getItem("jq_theme") || "dark";
      const body = document.body;
      const label = document.getElementById("theme-toggle-text");
      if (saved === "light") {
        body.classList.add("light-theme");
        label && (label.textContent = "ä¸»é¢˜ï¼šæµ…è‰²");
      } else {
        body.classList.remove("light-theme");
        label && (label.textContent = "ä¸»é¢˜ï¼šæ·±è‰²");
      }
    }

    function setupThemeToggle() {
      const btn = document.getElementById("btn-theme-toggle");
      if (!btn) return;
      btn.addEventListener("click", () => {
        const body = document.body;
        const label = document.getElementById("theme-toggle-text");
        const nowLight = !body.classList.contains("light-theme");
        if (nowLight) {
          body.classList.add("light-theme");
          localStorage.setItem("jq_theme", "light");
          label && (label.textContent = "ä¸»é¢˜ï¼šæµ…è‰²");
        } else {
          body.classList.remove("light-theme");
          localStorage.setItem("jq_theme", "dark");
          label && (label.textContent = "ä¸»é¢˜ï¼šæ·±è‰²");
        }
      });
    }

    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    async function loadDetail() {
      const id = getQueryParam("id");
      const titleEl = document.getElementById("doc-title");
      const dateEl = document.getElementById("doc-date");
      const idEl = document.getElementById("doc-id");
      const tagsEl = document.getElementById("doc-tags");
      const contentEl = document.getElementById("doc-content");

      if (!id) {
        titleEl.textContent = "æœªæ‰¾åˆ°æ–‡æ¡£";
        contentEl.textContent = "ç¼ºå°‘ id å‚æ•°ã€‚";
        return;
      }

      try {
        const res = await fetch(API_DOCS + "?id=" + encodeURIComponent(id));
        const data = await res.json();

        if (!data.ok || !data.item) {
          titleEl.textContent = "æ–‡æ¡£ä¸å­˜åœ¨";
          contentEl.textContent = data.error || "æœªæ‰¾åˆ°å¯¹åº”æ–‡æ¡£ã€‚";
          return;
        }

        const doc = data.item;
        titleEl.textContent = doc.title || "(æœªå‘½åæ–‡æ¡£)";
        const created = doc.createdAt
          ? new Date(doc.createdAt).toISOString().slice(0, 19).replace("T", " ")
          : "";

        dateEl.textContent = created ? ("åˆ›å»ºæ—¶é—´ï¼š" + created) : "";
        idEl.textContent = "ID: " + doc.id;

        if (doc.tags && doc.tags.length) {
          tagsEl.innerHTML = doc.tags
            .map((t) => '<span class="meta-tag">' + t + "</span>")
            .join("");
        }

        const safeHtml = sanitizeHtml(doc.content || "");
        contentEl.innerHTML = safeHtml || "<p>ï¼ˆå†…å®¹ä¸ºç©ºï¼‰</p>";
      } catch (e) {
        console.error(e);
        titleEl.textContent = "åŠ è½½å¤±è´¥";
        contentEl.textContent = "è¯·æ±‚å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•ã€‚";
        showToast("åŠ è½½å¤±è´¥");
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      applyThemeFromStorage();
      setupThemeToggle();

      // è®©è¯¦æƒ…å†…å®¹ä½¿ç”¨ Quill çš„å†…å®¹æ ·å¼ï¼ˆåˆ—è¡¨ã€æ ‡é¢˜ç­‰è¡¨ç°æ›´å¥½ï¼‰
      const contentEl = document.getElementById("doc-content");
      if (contentEl && !contentEl.classList.contains("ql-editor")) {
        contentEl.classList.add("ql-editor");
      }

      loadDetail();
    });
  </script>
</body>
</html>
